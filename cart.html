<!doctype html>
<html lang="en">
<head>
    <!-- Your existing head content -->
</head>
<body>
    <!-- Your existing body content -->
    <main class="container">
        <h1>Checkout</h1>
        <div id="cart-items"></div>
        <button class="btn btn-warning" onclick="clearCart()">Clear Cart</button>
        <form id="checkout-form">
            <!-- Your existing form content -->
        </form>
    </main>
    <footer class="footer mt-auto py-3">
        <!-- Your existing footer content -->
    </footer>
    <script>
        function displayCartItems() {
            const cartItems = JSON.parse(localStorage.getItem('cart')) || [];
            const cartItemsContainer = document.getElementById('cart-items');
            cartItemsContainer.innerHTML = '';

            if (cartItems.length === 0) {
                cartItemsContainer.innerHTML = '<p>Your cart is empty.</p>';
                return;
            }

            let total = 0;
            cartItems.forEach((item, index) => {
                const itemTotal = item.quantity * item.price;
                total += itemTotal;
                cartItemsContainer.innerHTML += `
                    <div class="cart-item">
                        <p><strong>${item.name}</strong> - ${item.quantity} x $${item.price.toFixed(2)} = $${itemTotal.toFixed(2)}</p>
                        <button class="btn btn-danger" onclick="removeFromCart(${index})">Remove</button>
                    </div>
                `;
            });

            cartItemsContainer.innerHTML += `<p><strong>Total: $${total.toFixed(2)}</strong></p>`;
        }

        function removeFromCart(index) {
            let cartItems = JSON.parse(localStorage.getItem('cart')) || [];
            cartItems.splice(index, 1);
            localStorage.setItem('cart', JSON.stringify(cartItems));
            displayCartItems();
        }

        function clearCart() {
            localStorage.removeItem('cart');
            displayCartItems();
        }

        document.getElementById('checkout-form').addEventListener('submit', function(event) {
            event.preventDefault();

            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const address = document.getElementById('address').value;
            const city = document.getElementById('city').value;
            const state = document.getElementById('state').value;
            const zip = document.getElementById('zip').value;
            const paymentMethod = document.getElementById('paymentMethod').value;
            const cartItems = JSON.parse(localStorage.getItem('cart')) || [];

            if (cartItems.length === 0) {
                alert('Your cart is empty.');
                return;
            }

            const totalAmount = cartItems.reduce((total, item) => total + item.quantity * item.price, 0).toFixed(2);

            const orderDetails = {
                name,
                email,
                address,
                city,
                state,
                zip,
                paymentMethod,
                cartItems,
                totalAmount
            };

            // Send order details via email
            const emailBody = `
                Name: ${name}
                Email: ${email}
                Address: ${address}, ${city}, ${state}, ${zip}
                Payment Method: ${paymentMethod}
                Order Details:
                ${cartItems.map(item => `${item.name} - ${item.quantity} x $${item.price.toFixed(2)} = $${(item.quantity * item.price).toFixed(2)}`).join('\n')}
                Total: $${totalAmount}
            `;

            window.location.href = `mailto:telliestudios@gmail.com?subject=New Order&body=${encodeURIComponent(emailBody)}`;

            // Send confirmation email to the user
            const userEmailBody = `
                Thank you for your order, ${name}!
                Here are your order details:
                ${cartItems.map(item => `${item.name} - ${item.quantity} x $${item.price.toFixed(2)} = $${(item.quantity * item.price).toFixed(2)}`).join('\n')}
                Total: $${totalAmount}
                We will process your order shortly.
            `;

            window.location.href = `mailto:${email}?subject=Order Confirmation&body=${encodeURIComponent(userEmailBody)}`;

            // Redirect to Venmo for payment
            if (paymentMethod === 'venmo') {
                window.location.href = `https://venmo.com/?txn=pay&recipients=Shantel-Crowley&amount=${totalAmount}&note=Order%20from%20Tellie%20Studios`;
            } else if (paymentMethod === 'paypal') {
                // Redirect to PayPal for payment
                window.location.href = `https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=telliestudios@gmail.com&amount=${totalAmount}&currency_code=USD&item_name=Order%20from%20Tellie%20Studios`;
            } else if (paymentMethod === 'creditCard') {
                // Handle credit card payment (this would typically involve integrating with a payment gateway)
                alert('Credit card payment is not yet implemented.');
            }

            // Clear the cart
            localStorage.removeItem('cart');
            alert('Thank you for your order! You will be redirected for payment.');
        });

        // Display cart items on page load
        displayCartItems();
    </script>
</body>
</html>



